(()=>{var e={};e.id=165,e.ids=[165],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},9551:e=>{"use strict";e.exports=require("url")},9844:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d});var a=s(260),r=s(8203),l=s(5155),n=s.n(l),i=s(7292),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["send",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6878)),"C:\\Users\\tagrb\\Documents\\cece\\cert\\certificate_generator\\certificate_generator\\src\\app\\send\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,1354)),"C:\\Users\\tagrb\\Documents\\cece\\cert\\certificate_generator\\certificate_generator\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\tagrb\\Documents\\cece\\cert\\certificate_generator\\certificate_generator\\src\\app\\send\\page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/send/page",pathname:"/send",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},322:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,3219,23)),Promise.resolve().then(s.t.bind(s,4863,23)),Promise.resolve().then(s.t.bind(s,5155,23)),Promise.resolve().then(s.t.bind(s,802,23)),Promise.resolve().then(s.t.bind(s,9350,23)),Promise.resolve().then(s.t.bind(s,8530,23)),Promise.resolve().then(s.t.bind(s,8921,23))},8474:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6959,23)),Promise.resolve().then(s.t.bind(s,3875,23)),Promise.resolve().then(s.t.bind(s,8903,23)),Promise.resolve().then(s.t.bind(s,7174,23)),Promise.resolve().then(s.t.bind(s,4178,23)),Promise.resolve().then(s.t.bind(s,7190,23)),Promise.resolve().then(s.t.bind(s,1365,23))},6128:(e,t,s)=>{Promise.resolve().then(s.bind(s,1354))},5856:(e,t,s)=>{Promise.resolve().then(s.bind(s,9246))},6043:(e,t,s)=>{Promise.resolve().then(s.bind(s,6878))},2835:(e,t,s)=>{Promise.resolve().then(s.bind(s,4858))},9246:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(5512),r=s(63),l=s.n(r),n=s(4369),i=s.n(n);function o({children:e}){return(0,a.jsxs)("html",{lang:"ar",dir:"rtl",children:[(0,a.jsxs)("head",{className:"jsx-4d4d1bd3e4d6714a",children:[(0,a.jsx)("title",{className:"jsx-4d4d1bd3e4d6714a",children:"مولد الشهادات"}),(0,a.jsx)("meta",{name:"description",content:"تطبيق لإنشاء وإرسال الشهادات",className:"jsx-4d4d1bd3e4d6714a"}),(0,a.jsx)(l(),{id:"4d4d1bd3e4d6714a",children:'@font-face{font-family:"Shamel Bold";src:url("/fonts/shamel_bold.ttf")format("truetype");font-weight:bold;font-style:normal}@font-face{font-family:"Shamel Light";src:url("/fonts/shamel_light.ttf")format("truetype");font-weight:normal;font-style:normal}body{font-family:"Shamel Light",sans-serif}h1,h2,h3,h4,h5,h6,strong{font-family:"Shamel Bold",sans-serif}'})]}),(0,a.jsx)("body",{className:i().className,children:e})]})}s(4263)},4858:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(5512),r=s(8009),l=s(8531),n=s.n(l);function i(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!1),[i,o]=(0,r.useState)(0),[d,c]=(0,r.useState)([]),[m,h]=(0,r.useState)(""),[u,p]=(0,r.useState)(!0),[x,f]=(0,r.useState)(""),[b,g]=(0,r.useState)("default"),[j,v]=(0,r.useState)({emailUser:"",emailPassword:"",smtpHost:"smtp.gmail.com",smtpPort:"587",fromName:""}),N=e=>{let{name:t,value:s}=e.target;v(e=>({...e,[t]:s}))},y=e=>{p("test"===e.target.value)},P=e=>{if("default"===b);else if("male"===b)return`مرحباً،

نرجو أن تجد مرفقاً شهادتك لإتمام البرنامج التدريبي.

شكراً لمشاركتك معنا، ونتمنى لك التوفيق في مسيرتك المهنية.

مع أطيب التحيات،
فريق التدريب`;else if("female"===b)return`مرحباً،

نرجو أن تجدي مرفقاً شهادتك لإتمام البرنامج التدريبي.

شكراً لمشاركتك معنا، ونتمنى لك التوفيق في مسيرتك المهنية.

مع أطيب التحيات،
فريق التدريب`;return`مرحباً،

نرجو أن تجد مرفقاً شهادة إتمام البرنامج التدريبي.

شكراً لمشاركتك معنا.

مع أطيب التحيات،
فريق التدريب`},_=()=>j.emailUser&&j.emailPassword&&j.smtpHost&&j.smtpPort?!u||!!x||(h("يرجى إدخال بريد إلكتروني للاختبار"),!1):(h("يرجى إدخال جميع بيانات SMTP المطلوبة"),!1),w=async()=>{if(0===e.length){h("لا توجد بيانات متدربين لإرسال الشهادات");return}if(_()){l(!0),h(""),o(0),c([]);try{let s=u?[{email:x,trainee_name:"اختبار",Gender:"Male",id:0}]:e.map((e,t)=>({email:e.email,trainee_name:e.trainee_name,Gender:e.Gender,id:t})),a=s.length,r=[];for(let l=0;l<a;l++){let n=s[l];P(n.Gender),await new Promise(e=>setTimeout(e,1e3));let i=Math.random()>.2;if(r.push({email:n.email,status:i?"sent":"failed",message:i?"تم الإرسال بنجاح":"فشل في الإرسال"}),!u){let s=[...e];s[n.id]={...e[n.id],status:i?"sent":"failed"},t(s)}o(Math.round((l+1)/a*100)),c(r)}u||localStorage.setItem("traineesData",JSON.stringify(e))}catch(e){console.error("Error sending emails:",e),h(`حدث خطأ أثناء إرسال البريد الإلكتروني: ${e.message}`)}finally{l(!1)}}};return(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("header",{className:"mb-8",children:[(0,a.jsx)(n(),{href:"/generate",className:"text-primary hover:underline mb-4 inline-block",children:"← العودة إلى صفحة إنشاء الشهادات"}),(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"إرسال الشهادات بالبريد الإلكتروني"})]}),m&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:m}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"إعدادات البريد الإلكتروني (SMTP)"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"عنوان البريد الإلكتروني"}),(0,a.jsx)("input",{type:"email",name:"emailUser",value:j.emailUser,onChange:N,className:"input-field",placeholder:"example@gmail.com"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"كلمة المرور أو كلمة مرور التطبيق"}),(0,a.jsx)("input",{type:"password",name:"emailPassword",value:j.emailPassword,onChange:N,className:"input-field",placeholder:"••••••••"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"ملاحظة: لحسابات Gmail، يجب استخدام كلمة مرور التطبيق وليس كلمة مرور الحساب العادية."})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"خادم SMTP"}),(0,a.jsx)("input",{type:"text",name:"smtpHost",value:j.smtpHost,onChange:N,className:"input-field",placeholder:"smtp.gmail.com"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"منفذ SMTP"}),(0,a.jsx)("input",{type:"text",name:"smtpPort",value:j.smtpPort,onChange:N,className:"input-field",placeholder:"587"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"اسم المرسل"}),(0,a.jsx)("input",{type:"text",name:"fromName",value:j.fromName,onChange:N,className:"input-field",placeholder:"اسم المرسل"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"نوع قالب البريد الإلكتروني"}),(0,a.jsxs)("select",{className:"input-field",value:b,onChange:e=>{g(e.target.value)},children:[(0,a.jsx)("option",{value:"default",children:"قالب للجنسين"}),(0,a.jsx)("option",{value:"male",children:"قالب للذكور"}),(0,a.jsx)("option",{value:"female",children:"قالب للإناث"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"سيتم استخدام القالب المناسب تلقائياً حسب جنس المتدرب."})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"وضع الإرسال"}),(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("input",{type:"radio",id:"test-mode",name:"send-mode",value:"test",checked:u,onChange:y,className:"mr-2"}),(0,a.jsx)("label",{htmlFor:"test-mode",children:"وضع الاختبار (إرسال إلى بريد إلكتروني واحد للتجربة)"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",id:"all-mode",name:"send-mode",value:"all",checked:!u,onChange:y,className:"mr-2"}),(0,a.jsx)("label",{htmlFor:"all-mode",children:"إرسال إلى جميع المتدربين"})]})]}),u&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"البريد الإلكتروني للاختبار"}),(0,a.jsx)("input",{type:"email",value:x,onChange:e=>{f(e.target.value)},className:"input-field",placeholder:"test@example.com"})]}),(0,a.jsx)("button",{onClick:w,disabled:s||0===e.length||!j.emailUser||!j.emailPassword,className:`btn-primary w-full ${!s&&0!==e.length&&j.emailUser&&j.emailPassword?"":"opacity-50 cursor-not-allowed"}`,children:s?"جاري الإرسال...":u?"إرسال بريد اختباري":"إرسال الشهادات بالبريد الإلكتروني"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"بيانات المتدربين"}),(0,a.jsxs)("p",{className:"mb-4",children:["عدد المتدربين: ",(0,a.jsx)("span",{className:"font-bold",children:e.length})]}),s&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("p",{className:"mb-2",children:["جاري إرسال البريد الإلكتروني: ",i,"%"]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,a.jsx)("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${i}%`}})})]}),d.length>0&&!u&&(0,a.jsx)("button",{onClick:()=>{if(e.length>0){let t=new Blob([[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).map(e=>"string"==typeof e?`"${e.replace(/"/g,'""')}"`:e).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.setAttribute("download","trainees_data_with_status.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}},className:"btn-primary w-full mb-4",children:"تنزيل البيانات المحدثة مع حالة الإرسال"}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-2",children:"معاينة قالب البريد الإلكتروني"}),(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded border",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-sm",children:P("female"===b?"Female":"Male")})})]})]})]}),d.length>0&&(0,a.jsxs)("div",{className:"card mt-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"نتائج الإرسال"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"table w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"البريد الإلكتروني"}),(0,a.jsx)("th",{children:"الحالة"}),(0,a.jsx)("th",{children:"الرسالة"})]})}),(0,a.jsx)("tbody",{children:d.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.email}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"sent"===e.status?"status-sent":"status-failed",children:"sent"===e.status?"تم الإرسال":"فشل"})}),(0,a.jsx)("td",{children:e.message})]},t))})]})})]})]})}},1354:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\tagrb\\\\Documents\\\\cece\\\\cert\\\\certificate_generator\\\\certificate_generator\\\\src\\\\app\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\tagrb\\Documents\\cece\\cert\\certificate_generator\\certificate_generator\\src\\app\\layout.tsx","default")},6878:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\tagrb\\\\Documents\\\\cece\\\\cert\\\\certificate_generator\\\\certificate_generator\\\\src\\\\app\\\\send\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\tagrb\\Documents\\cece\\cert\\certificate_generator\\certificate_generator\\src\\app\\send\\page.tsx","default")},440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(8077);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},4263:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[638,213,367],()=>s(9844));module.exports=a})();